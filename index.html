import React, { useState } from 'react';
import { 
  BookOpen, 
  Cross, 
  ChevronRight, 
  ArrowLeft, 
  Heart, 
  Sun, 
  Sparkles, 
  Compass,
  Star,
  Shield, 
  Flame, 
  Crown, 
  Anchor, 
  Scroll, 
  User, 
  Zap, 
  Map
} from 'lucide-react';

/**
 * DATOS DE PREPARACIÓN (CORAZÓN Y ESPÍRITU)
 */
const PREP_DATA = [
  {
    id: 'corazon',
    title: "Preparación del Corazón",
    subtitle: "La disposición interior",
    icon: <Heart className="text-red-700" />,
    desc: "El Rosario no es una repetición mecánica, sino un diálogo de amor. Antes de empezar, ponte en presencia de Dios. Reconoce tu pequeñez y Su grandeza. Haz un breve examen de conciencia y pide perdón (un Acto de Contrición) para que tu alma esté limpia y pueda recibir las gracias que la Virgen desea derramar sobre ti. Recuerda: Dios no busca palabras perfectas, busca un corazón sincero."
  },
  {
    id: 'ambiente',
    title: "Preparación del Ambiente",
    subtitle: "El espacio sagrado",
    icon: <Sun className="text-amber-600" />,
    desc: "Busca un lugar donde el ruido del mundo se apague. Si es posible, crea un pequeño altar: una imagen de la Virgen, un crucifijo o una vela encendida que simbolice la luz de Cristo. El orden exterior ayuda al orden interior. Si estás en un lugar ruidoso (como el transporte público), cierra los ojos y construye un 'claustro interior' en tu mente, ignorando las distracciones externas para centrarte en el misterio."
  },
  {
    id: 'cuerpo',
    title: "Preparación del Cuerpo",
    subtitle: "La postura reverente",
    icon: <User className="text-blue-700" />,
    desc: "Tu cuerpo también reza. Si tu salud lo permite, arrodillarse es la postura de humildad por excelencia. Si estás cansado o enfermo, siéntate erguido, evitando posturas que inviten a la somnolencia. Respira pausadamente; deja que tu ritmo cardíaco se calme. Sostener el rosario físicamente en tus manos es un recordatorio de que estás unido a la mano de María durante todo el camino."
  },
  {
    id: 'combate',
    title: "Preparación Mental",
    subtitle: "El combate a la distracción",
    icon: <Zap className="text-yellow-600" />,
    desc: "Las distracciones vendrán; no te angusties por ellas. San Francisco de Sales decía que si el rosario no es más que una lucha constante por volver a la presencia de Dios, es una oración excelente. Cuando tu mente vuele a tus problemas o tareas, no luches con violencia; simplemente vuelve a mirar el rostro de Jesús en el misterio que estás rezando. Cada vez que vuelves, es un acto de amor victorioso."
  },
  {
    id: 'intencion',
    title: "La Intención Sagrada",
    subtitle: "El propósito del rezo",
    icon: <Anchor className="text-emerald-700" />,
    desc: "No lances palabras al aire sin destino. Antes de la primera cuenta, nombra tus intenciones: por un enfermo, por la paz, por un pecado que quieres vencer o en acción de gracias. Ofrecer el Rosario por los demás ensancha el corazón y nos une a la Comunión de los Santos. La Virgen prometió que quienes propaguen su devoción serán socorridos en sus necesidades, así que confía tus penas a su Corazón Inmaculado."
  }
];

/**
 * DATOS DE LA GUÍA DEL PEREGRINO
 */
const PILGRIM_DATA = [
  {
    id: 'senal',
    title: "La Señal de la Cruz",
    subtitle: "El inicio del combate",
    icon: <Shield className="text-amber-700" />,
    desc: "Al trazar la Cruz sobre nuestra frente, labios y pecho, consagramos nuestros pensamientos, palabras y afectos a Cristo. Es el escudo que nos protege de las asechanzas del enemigo y la llave que abre el Cielo para nuestra oración. Hazlo con calma, sabiendo que estás marcando tu cuerpo como territorio de Dios."
  },
  {
    id: 'credo',
    title: "El Credo Apostólico",
    subtitle: "El sello de la fe",
    icon: <Cross className="text-amber-900" />,
    desc: "Recitado sobre el crucifijo del rosario, es la declaración de nuestra identidad católica heredada de los Apóstoles. Cada palabra es una piedra firme sobre la que construimos nuestra meditación. Es el resumen de toda la Historia de la Salvación que estamos a punto de contemplar."
  },
  {
    id: 'padre_nuestro',
    title: "El Padre Nuestro",
    subtitle: "La oración del Señor",
    icon: <Flame className="text-orange-600" />,
    desc: "En las cuentas grandes y separadas, nos dirigimos directamente a Dios Padre con las palabras que el mismo Jesús nos enseñó. Es el momento de reconocer Su soberanía, pedir Su Providencia y, sobre todo, perdonar para ser perdonados. Cada Padre Nuestro es un puente hacia la voluntad divina."
  },
  {
    id: 'virtudes',
    title: "Las Tres Avemarías",
    subtitle: "Fe, Esperanza y Caridad",
    icon: <Star className="text-yellow-500" />,
    desc: "Las tres primeras cuentas tras la cruz se rezan para pedir el aumento de las virtudes teologales. La primera por la Fe, la segunda por la Esperanza y la tercera por la Caridad. Sin estas tres luces, nuestra vida espiritual carece de rumbo y fuerza para enfrentar el mundo."
  },
  {
    id: 'decenas',
    title: "Las Decenas",
    subtitle: "Cuerpo y alma de la oración",
    icon: <Heart className="text-red-600" />,
    desc: "Diez Avemarías mientras contemplamos el misterio del día. Las palabras son el 'cuerpo' de la oración, pero la meditación es el 'alma'. Imagínate presente en cada escena: siente el frío del pesebre, el peso de la cruz o la alegría de la resurrección. María te lleva de la mano en este viaje."
  },
  {
    id: 'gloria',
    title: "Gloria y Jaculatorias",
    subtitle: "Alabanza y Súplica",
    icon: <Sun className="text-amber-500" />,
    desc: "Al final de cada decena, nos inclinamos ante la Santísima Trinidad. Es el momento de mayor gloria celestial. Añadimos la oración de Fátima ('Oh Jesús mío...') para pedir misericordia no solo por nosotros, sino por el mundo entero, cumpliendo el deseo de la Virgen."
  },
  {
    id: 'salve',
    title: "La Salve y el Final",
    subtitle: "El saludo a la Reina",
    icon: <Crown className="text-amber-600" />,
    desc: "Al terminar, nos encomendamos a la protección maternal de María, nuestra Abogada. Le entregamos nuestras fatigas, dudas y esperanzas con amor filial. Cerramos con la Señal de la Cruz, regresando al mundo con el corazón renovado por la compañía de Jesús y Su Madre."
  }
];

/**
 * DATOS DE LOS MISTERIOS
 */
const MYSTERIES_DATA = {
  gozosos: {
    title: "Misterios Gozosos",
    days: "Lunes y Sábado",
    color: "text-blue-900",
    accent: "bg-blue-900",
    bg: "bg-blue-50",
    items: [
      { label: "1º Misterio", name: "La Anunciación", fruit: "Humildad", desc: "El Arcángel Gabriel anuncia a la Virgen que será la Madre de Dios. Meditamos en la humildad radical de María al aceptar el plan divino." },
      { label: "2º Misterio", name: "La Visitación", fruit: "Caridad", desc: "María viaja para servir a su prima Isabel. Meditamos en cómo la verdadera fe siempre se traduce en el servicio amoroso al prójimo." },
      { label: "3º Misterio", name: "El Nacimiento", fruit: "Pobreza de espíritu", desc: "El Salvador nace en un establo. Meditamos en el desapego de las cosas del mundo para encontrar la verdadera riqueza." },
      { label: "4º Misterio", name: "La Presentación", fruit: "Obediencia", desc: "María y José presentan al Niño en el Templo. Meditamos en la sumisión gozosa a las leyes divinas." },
      { label: "5º Misterio", name: "El Niño Perdido", fruit: "Búsqueda de Jesús", desc: "Jesús es hallado entre los doctores. Meditamos en la importancia de buscar siempre la voluntad del Padre." }
    ]
  },
  dolorosos: {
    title: "Misterios Dolorosos",
    days: "Martes y Viernes",
    color: "text-red-900",
    accent: "bg-red-900",
    bg: "bg-red-50",
    items: [
      { label: "1º Misterio", name: "Agonía en el Huerto", fruit: "Dolor por el pecado", desc: "Jesús suda sangre aceptando el cáliz del sufrimiento. Meditamos en el valor de la oración perseverante." },
      { label: "2º Misterio", name: "La Flagelación", fruit: "Pureza", desc: "Jesús es azotado por nuestras culpas carnales. Meditamos en el sacrificio de su cuerpo para redimir nuestra debilidad." },
      { label: "3º Misterio", name: "Corona de Espinas", fruit: "Coraje moral", desc: "Se burlan de la realeza de Cristo. Meditamos en la dignidad del cristiano que soporta la burla del mundo por fe." },
      { label: "4º Misterio", name: "Camino al Calvario", fruit: "Paciencia", desc: "Jesús carga la Cruz y cae tres veces. Meditamos en la fuerza para levantarnos tras cada caída." },
      { label: "5º Misterio", name: "La Crucifixión", fruit: "Perdón y Entrega", desc: "Jesús muere perdonando. Meditamos en el amor infinito que se entrega hasta la última gota de sangre." }
    ]
  },
  gloriosos: {
    title: "Misterios Gloriosos",
    days: "Miércoles y Domingo",
    color: "text-amber-900",
    accent: "bg-amber-700",
    bg: "bg-amber-50",
    items: [
      { label: "1º Misterio", name: "La Resurrección", fruit: "Fe viva", desc: "La victoria definitiva sobre la muerte. Meditamos en la esperanza de nuestra propia resurrección." },
      { label: "2º Misterio", name: "La Ascensión", fruit: "Deseo del Cielo", desc: "Jesús asciende al Padre. Meditamos en que nuestra patria definitiva no está en la tierra, sino en el Cielo." },
      { label: "3º Misterio", name: "Pentecostés", fruit: "Zelo apostólico", desc: "El Espíritu Santo desciende sobre la Iglesia. Meditamos en el fuego divino que nos impulsa a evangelizar." },
      { label: "4º Misterio", name: "La Asunción", fruit: "Gravedad de alma", desc: "María es elevada al cielo en cuerpo y alma. Meditamos en el premio de una vida dedicada enteramente a Dios." },
      { label: "5º Misterio", name: "La Coronación", fruit: "Confianza filial", desc: "María es coronada Reina. Meditamos en su poderosa intercesión como Medianera de todas las gracias." }
    ]
  },
  luminosos: {
    title: "Misterios Luminosos",
    days: "Jueves",
    color: "text-yellow-900",
    accent: "bg-yellow-600",
    bg: "bg-yellow-50",
    items: [
      { label: "1º Misterio", name: "El Bautismo", fruit: "Fidelidad", desc: "Jesús en el Jordán siendo proclamado Hijo amado. Meditamos en nuestra propia dignidad bautismal." },
      { label: "2º Misterio", name: "Bodas de Caná", fruit: "Confianza en María", desc: "El primer milagro a ruego de su Madre. Meditamos en el poder de la intercesión de María." },
      { label: "3º Misterio", name: "Anuncio del Reino", fruit: "Conversión", desc: "Jesús llama al arrepentimiento. Meditamos en la necesidad constante de reformar nuestro corazón." },
      { label: "4º Misterio", name: "Transfiguración", fruit: "Espíritu de oración", desc: "La gloria en el Tabor. Meditamos en los momentos de consuelo espiritual que Dios nos regala." },
      { label: "5º Misterio", name: "La Eucaristía", fruit: "Amor al Sacramento", desc: "Institución del Pan de Vida. Meditamos en la presencia real de Cristo que se queda con nosotros." }
    ]
  }
};

/**
 * DATOS DE LAS ORACIONES (TESORO DE GRACIA)
 */
const PRAYERS_DATA = [
  {
    id: 'credo',
    title: "Credo de los Apóstoles",
    icon: <Cross className="text-amber-800" />,
    text: "Creo en Dios, Padre Todopoderoso, Creador del cielo y de la tierra. Creo en Jesucristo, su único Hijo, Nuestro Señor, que fue concebido por obra y gracia del Espíritu Santo, nació de Santa María Virgen, padeció bajo el poder de Poncio Pilato, fue crucificado, muerto y sepultado, descendió a los infiernos, al tercer día resucitó de entre los muertos, subió a los cielos y está sentado a la derecha de Dios, Padre Todopoderoso. Desde allí ha de venir a juzgar a vivos y muertos. Creo en el Espíritu Santo, la santa Iglesia católica, la comunión de los santos, el perdón de los pecados, la resurrección de la carne y la vida eterna. Amén."
  },
  {
    id: 'padrenuestro',
    title: "Padre Nuestro",
    icon: <Flame className="text-orange-600" />,
    text: "Padre nuestro, que estás en el cielo, santificado sea tu Nombre; venga a nosotros tu reino; hágase tu voluntad en la tierra como en el cielo. Danos hoy nuestro pan de cada día; perdona nuestras deudas, como también nosotros perdonamos a nuestros deudores; no nos dejes caer en la tentación, y líbranos del mal. Amén."
  },
  {
    id: 'avemaria',
    title: "Ave María",
    icon: <Anchor className="text-blue-700" />,
    text: "Dios te salve, María, llena eres de gracia; el Señor es contigo; bendita Tú eres entre todas las mujeres, y bendito es el fruto de tu vientre, Jesús. Santa María, Madre de Dios, ruega por nosotros, pecadores, ahora y en la hora de nuestra muerte. Amén."
  },
  {
    id: 'gloria',
    title: "Gloria al Padre",
    icon: <Sun className="text-amber-500" />,
    text: "Gloria al Padre, y al Hijo, y al Espíritu Santo. Como era en el principio, ahora y siempre, por los siglos de los siglos. Amén."
  },
  {
    id: 'jaculatoria',
    title: "Jaculatoria de Fátima",
    icon: <Shield className="text-red-700" />,
    text: "Oh Jesús mío, perdona nuestros pecados, líbranos del fuego del infierno, lleva al cielo a todas las almas, especialmente a las más necesitadas de Tu misericordia. Amén."
  },
  {
    id: 'salveregina',
    title: "Soberana Reina y Salve",
    icon: <Crown className="text-amber-600" />,
    text: "Infinitas gracias os damos, Soberana Reina, por los beneficios que todos los días recibimos de vuestras manos liberales. Dignaos ahora y para siempre tomarnos bajo vuestro poderoso amparo, y para más obligaros, os saludamos con una Salve:\n\nDios te salve, Reina y Madre de misericordia, vida, dulzura y esperanza nuestra; Dios te salve. A Ti clamamos los desterrados hijos de Eva; a Ti suspiramos, gimiendo y llorando en este valle de lágrimas. Ea, pues, Abogada nuestra, vuelve a nosotros esos tus ojos misericordiosos; y después de este destierro muéstranos a Jesús, fruto bendito de tu vientre. ¡Oh clemente, oh piadosa, oh dulce siempre Virgen María! Ruega por nosotros, Santa Madre de Dios, para que seamos dignos de alcanzar las promesas de Nuestro Señor Jesucristo. Amén."
  }
];

const App = () => {
  const [view, setView] = useState({ section: 'menu', sub: null, detail: null });

  const navigateBack = () => {
    if (view.detail) setView({ ...view, detail: null });
    else if (view.sub) setView({ ...view, sub: null });
    else setView({ section: 'menu', sub: null, detail: null });
  };

  /**
   * COMPONENTE: MENÚ PRINCIPAL
   */
  const MainMenu = () => (
    <div className="space-y-8 animate-in fade-in slide-in-from-bottom-6 duration-700">
      <div className="relative h-64 rounded-[3.5rem] overflow-hidden shadow-2xl border-2 border-amber-600/40 bg-gradient-to-br from-amber-900 via-amber-800 to-amber-950 flex flex-col items-center justify-center p-8 text-center">
        <Crown className="text-amber-400 mb-4 opacity-30" size={64} />
        <h2 className="text-4xl font-serif text-amber-400 mb-2 font-bold drop-shadow-md tracking-tight">Santo Rosario</h2>
        <p className="text-white/90 text-sm italic font-serif leading-relaxed px-4">
          "Dadme un ejército que rece el Rosario y venceré al mundo."
        </p>
        <div className="h-0.5 w-16 bg-amber-500 mx-auto mt-4 opacity-50" />
        <p className="text-amber-200/60 text-[10px] uppercase tracking-widest mt-2 font-bold">— San Pío de Pietrelcina</p>
      </div>

      <div className="grid grid-cols-1 gap-6">
        {[
          { id: 'prep', title: 'Corazón y Espíritu', sub: 'Teología de la Preparación', icon: <Sparkles />, desc: "Domina el arte del silencio y la disposición sagrada.", color: "bg-amber-50" },
          { id: 'passo', title: 'Guía del Peregrino', sub: 'La Estructura Mística', icon: <Compass />, desc: "Descubre el simbolismo oculto tras cada cuenta.", color: "bg-blue-50" },
          { id: 'mist', title: 'Los Santos Misterios', sub: 'Vida de Nuestro Señor', icon: <BookOpen />, desc: "Medita los episodios centrales de la Salvación.", color: "bg-red-50" },
          { id: 'oracoes', title: 'Tesoro de Gracia', sub: 'Oraciones y Promesas', icon: <Heart />, desc: "Las palabras sagradas de nuestra fe.", color: "bg-emerald-50" },
        ].map(item => (
          <button 
            key={item.id}
            onClick={() => setView({ ...view, section: item.id })}
            className={`group relative flex items-center gap-6 ${item.color} p-6 rounded-3xl border border-amber-200/50 shadow-md hover:shadow-xl hover:border-amber-400 transition-all text-left overflow-hidden active:scale-[0.98]`}
          >
            <div className="w-16 h-16 rounded-2xl bg-amber-900 text-amber-100 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
              {React.cloneElement(item.icon, { size: 32 })}
            </div>
            <div className="flex-1 relative z-10">
              <h3 className="font-serif font-bold text-amber-950 text-xl">{item.title}</h3>
              <p className="text-[10px] text-amber-700 font-bold uppercase tracking-wider mb-1">{item.sub}</p>
              <p className="text-xs text-gray-500 italic leading-snug">{item.desc}</p>
            </div>
            <ChevronRight className="text-amber-300 group-hover:text-amber-600 transition-colors" />
          </button>
        ))}
      </div>
    </div>
  );

  /**
   * COMPONENTE: VISTA DE PREPARACIÓN
   */
  const PrepView = () => {
    if (!view.detail) {
      return (
        <div className="space-y-6 animate-in fade-in duration-500">
          <div className="bg-amber-950 p-10 rounded-[3.5rem] text-center shadow-xl border-b-4 border-amber-500">
            <Sparkles className="text-amber-400 mx-auto mb-4" size={48} />
            <h3 className="text-3xl font-serif font-bold text-amber-100">La Disposición Sagrada</h3>
            <p className="text-amber-200/70 text-xs mt-3 italic">"Prepara tu alma como un sagrario para recibir al Rey."</p>
          </div>

          <div className="grid grid-cols-1 gap-4">
            {PREP_DATA.map((item) => (
              <button
                key={item.id}
                onClick={() => setView({ ...view, detail: item })}
                className="bg-white p-6 rounded-[2.5rem] shadow-md border border-amber-100 flex items-center gap-5 hover:border-amber-400 transition-all group"
              >
                <div className="bg-amber-50 w-14 h-14 rounded-2xl flex items-center justify-center group-hover:bg-amber-100 transition-colors">
                  {React.cloneElement(item.icon, { size: 28 })}
                </div>
                <div className="flex-1 text-left">
                  <h4 className="font-serif font-bold text-amber-950 text-lg leading-tight">{item.title}</h4>
                  <p className="text-[10px] text-amber-700 font-bold uppercase tracking-widest">{item.subtitle}</p>
                </div>
                <ChevronRight className="text-amber-200 group-hover:text-amber-500" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in slide-in-from-right-8 duration-500 space-y-6 pb-20">
        <div className="bg-white p-10 rounded-[4rem] shadow-2xl border-4 border-amber-600/10 relative overflow-hidden">
          <div className="flex flex-col items-center text-center mb-8">
            <div className="bg-amber-50 p-5 rounded-3xl mb-4 border border-amber-100">
              {React.cloneElement(view.detail.icon, { size: 40 })}
            </div>
            <h3 className="text-3xl font-serif font-bold text-amber-950 leading-tight">{view.detail.title}</h3>
            <p className="text-xs text-amber-600 font-bold uppercase tracking-widest mt-2">{view.detail.subtitle}</p>
            <div className="h-0.5 w-12 bg-amber-200 mt-6" />
          </div>

          <div className="relative">
            <Scroll className="absolute -top-6 -left-6 opacity-[0.03] text-amber-950" size={100} />
            <p className="text-gray-700 leading-relaxed italic text-lg font-serif border-l-4 border-amber-300 pl-8">
              {view.detail.desc}
            </p>
          </div>
        </div>

        <button 
          onClick={() => setView({ ...view, detail: null })}
          className="w-full bg-amber-900 text-white py-6 rounded-[2.5rem] font-bold uppercase tracking-widest text-sm shadow-xl hover:bg-amber-800 transition-colors"
        >
          Volver a Preparación
        </button>
      </div>
    );
  };

  /**
   * COMPONENTE: VISTA GUÍA DEL PEREGRINO
   */
  const StepByStep = () => {
    if (!view.detail) {
      return (
        <div className="space-y-6 animate-in fade-in duration-500">
          <div className="bg-blue-950 p-10 rounded-[3.5rem] text-center shadow-xl border-b-4 border-blue-400">
            <Map className="text-blue-300 mx-auto mb-4" size={48} />
            <h3 className="text-3xl font-serif font-bold text-blue-100">Ruta de Oración</h3>
            <p className="text-blue-200/70 text-xs mt-3 italic">"Cada cuenta es un paso hacia el encuentro con Cristo."</p>
          </div>

          <div className="grid grid-cols-1 gap-4">
            {PILGRIM_DATA.map((item) => (
              <button
                key={item.id}
                onClick={() => setView({ ...view, detail: item })}
                className="bg-white p-6 rounded-[2.5rem] shadow-md border border-blue-100 flex items-center gap-5 hover:border-blue-400 transition-all group"
              >
                <div className="bg-blue-50 w-14 h-14 rounded-2xl flex items-center justify-center group-hover:bg-blue-100 transition-colors">
                  {React.cloneElement(item.icon, { size: 28 })}
                </div>
                <div className="flex-1 text-left">
                  <h4 className="font-serif font-bold text-amber-950 text-lg leading-tight">{item.title}</h4>
                  <p className="text-[10px] text-blue-700 font-bold uppercase tracking-widest">{item.subtitle}</p>
                </div>
                <ChevronRight className="text-blue-200 group-hover:text-blue-500" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in slide-in-from-right-8 duration-500 space-y-6 pb-20">
        <div className="bg-white p-10 rounded-[4rem] shadow-2xl border-4 border-blue-600/10 relative overflow-hidden">
          <div className="flex flex-col items-center text-center mb-8">
            <div className="bg-blue-50 p-5 rounded-3xl mb-4 border border-blue-100">
              {React.cloneElement(view.detail.icon, { size: 40 })}
            </div>
            <h3 className="text-3xl font-serif font-bold text-amber-950 leading-tight">{view.detail.title}</h3>
            <p className="text-xs text-blue-600 font-bold uppercase tracking-widest mt-2">{view.detail.subtitle}</p>
            <div className="h-0.5 w-12 bg-blue-200 mt-6" />
          </div>

          <div className="relative">
            <Scroll className="absolute -top-6 -left-6 opacity-[0.03] text-blue-950" size={100} />
            <p className="text-gray-700 leading-relaxed italic text-lg font-serif border-l-4 border-blue-300 pl-8">
              {view.detail.desc}
            </p>
          </div>
        </div>

        <button 
          onClick={() => setView({ ...view, detail: null })}
          className="w-full bg-blue-900 text-white py-6 rounded-[2.5rem] font-bold uppercase tracking-widest text-sm shadow-xl hover:bg-blue-800 transition-colors"
        >
          Volver a la Guía
        </button>
      </div>
    );
  };

  /**
   * COMPONENTE: VISTA DE MISTERIOS
   */
  const MysteriesView = () => {
    if (!view.sub) {
      return (
        <div className="grid grid-cols-1 gap-6 animate-in zoom-in-95 duration-500">
          {Object.entries(MYSTERIES_DATA).map(([key, data]) => (
            <button
              key={key}
              onClick={() => setView({ ...view, sub: key })}
              className={`p-10 rounded-[3rem] border-2 ${data.bg} border-amber-200/50 text-left hover:shadow-lg transition-all relative overflow-hidden shadow-md`}
            >
              <span className={`text-[10px] font-extrabold uppercase tracking-[0.3em] ${data.color}`}>{data.days}</span>
              <h3 className={`text-4xl font-serif font-bold ${data.color} mt-2`}>{data.title}</h3>
              <ChevronRight className={`absolute right-6 top-1/2 -translate-y-1/2 ${data.color} opacity-40`} />
            </button>
          ))}
        </div>
      );
    }

    const category = MYSTERIES_DATA[view.sub];
    if (!view.detail) {
      return (
        <div className="space-y-4 animate-in slide-in-from-right-8 duration-500">
          <div className={`p-10 rounded-[3.5rem] ${category.bg} border-2 border-amber-200/50 shadow-xl text-center`}>
            <h3 className={`text-3xl font-serif font-bold ${category.color}`}>{category.title}</h3>
            <p className="text-[10px] text-amber-700 font-bold uppercase tracking-widest mt-2">Selecciona un misterio</p>
          </div>
          <div className="space-y-3">
            {category.items.map((item, idx) => (
              <button
                key={idx}
                onClick={() => setView({ ...view, detail: item })}
                className="w-full bg-white p-6 rounded-[2.5rem] border border-amber-100 flex justify-between items-center hover:bg-amber-50 shadow-sm"
              >
                <div className="text-left">
                  <span className="text-[10px] font-bold text-amber-600 uppercase block tracking-widest">{item.label}</span>
                  <h4 className="font-serif font-bold text-amber-950 text-xl">{item.name}</h4>
                </div>
                <ChevronRight size={20} className="text-amber-300" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in fade-in duration-500 space-y-8">
        <div className={`p-10 rounded-[4rem] ${category.bg} border-4 border-amber-400/20 shadow-2xl`}>
          <span className={`text-xs font-extrabold uppercase tracking-[0.4em] ${category.color} block mb-6 text-center`}>{view.detail.label}</span>
          <h3 className={`text-4xl font-serif font-bold ${category.color} mb-10 text-center leading-tight`}>{view.detail.name}</h3>
          <div className="bg-white/90 p-8 rounded-[3rem] shadow-inner text-center font-serif italic text-gray-800 leading-relaxed">
            "{view.detail.desc}"
          </div>
          <div className="mt-8 flex items-center gap-4 bg-white/50 p-6 rounded-[2.5rem]">
            <div className="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white"><Star size={24}/></div>
            <div>
              <p className="text-[10px] uppercase font-bold text-amber-900/50">Fruto del Espíritu</p>
              <p className="text-xl font-serif font-bold text-amber-900">{view.detail.fruit}</p>
            </div>
          </div>
        </div>
      </div>
    );
  };

  /**
   * COMPONENTE: VISTA TESORO DE GRACIA
   */
  const PrayersView = () => {
    if (!view.detail) {
      return (
        <div className="space-y-6 animate-in fade-in duration-500">
          <div className="relative h-48 rounded-[3.5rem] bg-gradient-to-tr from-emerald-900 to-emerald-700 flex flex-col items-center justify-center p-10 text-center shadow-2xl">
            <Heart className="text-emerald-300 mb-2 opacity-40" size={48} />
            <h3 className="text-3xl font-serif font-bold text-white uppercase tracking-tighter">Tesoro de Gracia</h3>
            <p className="text-white/70 text-xs mt-2 italic tracking-wide">El jardín de las palabras sagradas.</p>
          </div>

          <div className="grid grid-cols-1 gap-4">
            {PRAYERS_DATA.map((prayer) => (
              <button
                key={prayer.id}
                onClick={() => setView({ ...view, detail: prayer })}
                className="bg-white p-6 rounded-[2.5rem] shadow-md border border-amber-100 flex items-center gap-5 hover:border-emerald-400 hover:shadow-xl transition-all group"
              >
                <div className="bg-emerald-50 w-14 h-14 rounded-2xl flex items-center justify-center group-hover:bg-emerald-100 transition-colors">
                  {React.cloneElement(prayer.icon, { size: 28 })}
                </div>
                <div className="flex-1 text-left">
                  <h4 className="font-serif font-bold text-amber-950 text-xl">{prayer.title}</h4>
                  <p className="text-[10px] text-emerald-700 font-bold uppercase tracking-widest">Oración completa</p>
                </div>
                <ChevronRight className="text-amber-200 group-hover:text-emerald-500" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in slide-in-from-right-8 duration-500 space-y-6 pb-20">
        <div className="bg-white p-10 rounded-[4rem] shadow-2xl border-4 border-emerald-600/10 relative overflow-hidden">
          <div className="flex flex-col items-center text-center mb-8">
            <div className="bg-emerald-50 p-5 rounded-3xl mb-4 border border-emerald-100">
              {React.cloneElement(view.detail.icon, { size: 40 })}
            </div>
            <h3 className="text-3xl font-serif font-bold text-amber-950 leading-tight">{view.detail.title}</h3>
            <div className="h-0.5 w-12 bg-emerald-200 mt-4" />
          </div>

          <div className="relative">
            <Scroll className="absolute -top-6 -left-6 opacity-[0.03] text-emerald-950" size={100} />
            <p className="text-gray-800 leading-relaxed italic text-lg font-serif border-l-4 border-emerald-300 pl-8 whitespace-pre-line">
              {view.detail.text}
            </p>
          </div>
        </div>

        <button 
          onClick={() => setView({ ...view, detail: null })}
          className="w-full bg-emerald-900 text-white py-6 rounded-[2.5rem] font-bold uppercase tracking-widest text-sm shadow-xl hover:bg-emerald-800 transition-colors"
        >
          Volver al Tesoro
        </button>
      </div>
    );
  };

  return (
    <div className="min-h-screen font-sans pb-40 bg-[#fcfbf7]">
      <header className="sticky top-0 z-50 bg-white/95 backdrop-blur-md px-4 py-5 md:px-6 md:py-6 flex items-center justify-between border-b-2 border-amber-200/30 shadow-md">
        <div className="flex items-center gap-3 md:gap-5">
          {view.section !== 'menu' && (
            <button onClick={navigateBack} className="p-2 md:p-3 rounded-2xl bg-amber-50 text-amber-950 hover:bg-amber-100 transition-colors shadow-sm">
              <ArrowLeft size={24} strokeWidth={2.5} />
            </button>
          )}
          <div>
            <h1 className="text-xl md:text-2xl font-serif font-bold text-amber-950 tracking-tight leading-none">
              {view.section === 'menu' ? 'Guía Sacra' : 
               view.section === 'prep' ? 'Corazón' :
               view.section === 'passo' ? 'Camino' :
               view.section === 'mist' ? 'Misterios' : 'Tesoro'}
            </h1>
            <p className="text-[8px] md:text-[9px] text-amber-600 font-extrabold uppercase tracking-[0.4em] mt-1 opacity-70">
              {view.detail ? 'Meditación Profunda' : 'Formación Espiritual'}
            </p>
          </div>
        </div>
        <div className="w-12 h-12 md:w-14 md:h-14 rounded-2xl bg-amber-100 border-2 border-amber-200 flex items-center justify-center text-amber-800 shadow-inner">
          <Cross size={28} />
        </div>
      </header>

      <main className="max-w-2xl mx-auto p-4 md:p-10">
        {view.section === 'menu' && <MainMenu />}
        {view.section === 'prep' && <PrepView />}
        {view.section === 'passo' && <StepByStep />}
        {view.section === 'mist' && <MysteriesView />}
        {view.section === 'oracoes' && <PrayersView />}
      </main>

      <nav className="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t-2 border-amber-100 px-6 md:px-12 py-5 md:py-6 flex justify-around items-center z-50 shadow-[0_-10px_30px_rgba(0,0,0,0.08)]">
        <button onClick={() => setView({section: 'menu', sub: null, detail: null})} className={`flex flex-col items-center gap-1.5 md:gap-2 transition-all ${view.section === 'menu' ? 'text-amber-800 scale-110' : 'text-gray-300 hover:text-amber-400'}`}>
          <Star size={24} fill={view.section === 'menu' ? 'currentColor' : 'none'} />
          <span className="text-[9px] md:text-[10px] font-extrabold uppercase tracking-widest">Início</span>
        </button>
        
        <a 
          href="https://santorosarioes.netlify.app/" 
          target="_blank" 
          rel="noopener noreferrer"
          className="relative -mt-16 group outline-none"
        >
          <div className="w-20 h-20 bg-amber-900 rounded-[2.5rem] flex items-center justify-center border-[6px] border-[#fcfbf7] shadow-2xl active:scale-90 transition-transform group-hover:bg-amber-800">
             <Cross size={32} className="text-white" />
          </div>
          <span className="text-[9px] md:text-[10px] font-extrabold text-amber-900 absolute -bottom-8 left-1/2 -translate-x-1/2 uppercase tracking-[0.2em] whitespace-nowrap">Rezar</span>
        </a>

        <button onClick={() => setView({section: 'mist', sub: null, detail: null})} className={`flex flex-col items-center gap-1.5 md:gap-2 transition-all ${view.section === 'mist' ? 'text-amber-800 scale-110' : 'text-gray-300 hover:text-amber-400'}`}>
          <BookOpen size={24} fill={view.section === 'mist' ? 'currentColor' : 'none'} />
          <span className="text-[9px] md:text-[10px] font-extrabold uppercase tracking-widest">Meditar</span>
        </button>
      </nav>
    </div>
  );
};

export default App;
