import React, { useState } from 'react';
import { 
  BookOpen, 
  Cross, 
  ChevronRight, 
  ArrowLeft, 
  Heart, 
  Sun, 
  Sparkles, 
  Compass,
  Star,
  Shield, 
  Flame, 
  Crown, 
  Anchor, 
  Scroll, 
  User, 
  Zap, 
  Map
} from 'lucide-react';

/**
 * COMPONENTE AUXILIAR PARA RENDERIZAR ÍCONES COM SEGURANÇA
 */
const SafeIcon = ({ icon, size = 24, className = "" }) => {
  if (!icon) return null;
  return React.cloneElement(icon, { size, className: `${icon.props.className || ""} ${className}` });
};

/**
 * DATOS DE PREPARACIÓN (CORAZÓN Y ESPÍRITU)
 */
const PREP_DATA = [
  {
    id: 'corazon',
    title: "Preparación del Corazón",
    subtitle: "La disposición interior",
    icon: <Heart />,
    desc: "El Rosario no es una repetición mecánica, sino un diálogo de amor. Antes de empezar, ponte en presencia de Dios. Reconoce tu pequeñez y Su grandeza. Haz un breve examen de conciencia y pide perdón (un Acto de Contrición) para que tu alma esté limpia y pueda recibir las gracias que la Virgen desea derramar sobre ti."
  },
  {
    id: 'ambiente',
    title: "Preparación del Ambiente",
    subtitle: "El espacio sagrado",
    icon: <Sun />,
    desc: "Busca un lugar donde el ruido del mundo se apague. Si es posible, crea un pequeño altar: una imagen de la Virgen, un crucifijo o una vela encendida que simbolice la luz de Cristo. El orden exterior ayuda al orden interior."
  },
  {
    id: 'cuerpo',
    title: "Preparación del Cuerpo",
    subtitle: "La postura reverente",
    icon: <User />,
    desc: "Tu cuerpo también reza. Si tu salud lo permite, arrodillarse es la postura de humildad por excelencia. Si estás cansado o enfermo, siéntate erguido, evitando posturas que inviten a la somnolencia."
  },
  {
    id: 'combate',
    title: "Preparación Mental",
    subtitle: "El combate a la distracción",
    icon: <Zap />,
    desc: "Las distracciones vendrán; no te angusties por ellas. San Francisco de Sales decía que si el rosario no es más que una lucha constante por volver a la presencia de Dios, es una oración excelente."
  },
  {
    id: 'intencion',
    title: "La Intención Sagrada",
    subtitle: "El propósito del rezo",
    icon: <Anchor />,
    desc: "No lances palabras al aire sin destino. Antes de la primera cuenta, nombra tus intenciones: por un enfermo, por la paz, por un pecado que quieres vencer o en acción de gracias."
  }
];

/**
 * DATOS DE LA GUÍA DEL PEREGRINO
 */
const PILGRIM_DATA = [
  {
    id: 'senal',
    title: "La Señal de la Cruz",
    subtitle: "El inicio del combate",
    icon: <Shield />,
    desc: "Al trazar la Cruz sobre nuestra frente, labios y pecho, consagramos nuestros pensamientos, palabras y afectos a Cristo. Es el escudo que nos protege."
  },
  {
    id: 'credo',
    title: "El Credo Apostólico",
    subtitle: "El sello de la fe",
    icon: <Cross />,
    desc: "Recitado sobre el crucifijo del rosario, es la declaración de nuestra identidad católica heredada de los Apóstoles."
  },
  {
    id: 'padre_nuestro',
    title: "El Padre Nuestro",
    subtitle: "La oración del Señor",
    icon: <Flame />,
    desc: "En las cuentas grandes y separadas, nos dirigimos directamente a Dios Padre con las palabras que el mismo Jesús nos enseñó."
  },
  {
    id: 'virtudes',
    title: "Las Tres Avemarías",
    subtitle: "Fe, Esperanza y Caridad",
    icon: <Star />,
    desc: "Las tres primeras cuentas tras la cruz se rezan para pedir el aumento de las virtudes teologales."
  },
  {
    id: 'decenas',
    title: "Las Decenas",
    subtitle: "Cuerpo y alma de la oración",
    icon: <Heart />,
    desc: "Diez Avemarías mientras contemplamos el misterio del día. Las palabras son el 'cuerpo', pero la meditación es el 'alma'."
  },
  {
    id: 'gloria',
    title: "Gloria y Jaculatorias",
    subtitle: "Alabanza y Súplica",
    icon: <Sun />,
    desc: "Al final de cada decena, nos inclinamos ante la Santísima Trinidad. Es el momento de mayor gloria celestial."
  },
  {
    id: 'salve',
    title: "La Salve y el Final",
    subtitle: "El saludo a la Reina",
    icon: <Crown />,
    desc: "Al terminar, nos encomendamos a la protección maternal de María, nuestra Abogada. Regresamos al mundo con el corazón renovado."
  }
];

/**
 * DATOS DE LOS MISTERIOS
 */
const MYSTERIES_DATA = {
  gozosos: {
    title: "Misterios Gozosos",
    days: "Lunes y Sábado",
    color: "text-blue-900",
    accent: "bg-blue-900",
    bg: "bg-blue-50",
    items: [
      { label: "1º Misterio", name: "La Anunciación", fruit: "Humildad", desc: "El Arcángel Gabriel anuncia a la Virgen que será la Madre de Dios." },
      { label: "2º Misterio", name: "La Visitación", fruit: "Caridad", desc: "María viaja para servir a su prima Isabel." },
      { label: "3º Misterio", name: "El Nacimiento", fruit: "Pobreza de espíritu", desc: "El Salvador nace en un establo." },
      { label: "4º Misterio", name: "La Presentación", fruit: "Obediencia", desc: "María y José presentan al Niño en el Templo." },
      { label: "5º Misterio", name: "El Niño Perdido", fruit: "Búsqueda de Jesús", desc: "Jesús es hallado entre los doctores." }
    ]
  },
  dolorosos: {
    title: "Misterios Dolorosos",
    days: "Martes y Viernes",
    color: "text-red-900",
    accent: "bg-red-900",
    bg: "bg-red-50",
    items: [
      { label: "1º Misterio", name: "Agonía en el Huerto", fruit: "Dolor por el pecado", desc: "Jesús suda sangre aceptando el cáliz del sufrimiento." },
      { label: "2º Misterio", name: "La Flagelación", fruit: "Pureza", desc: "Jesús es azotado por nuestras culpas carnales." },
      { label: "3º Misterio", name: "Corona de Espinas", fruit: "Coraje moral", desc: "Se burlan de la realeza de Cristo." },
      { label: "4º Misterio", name: "Camino al Calvario", fruit: "Paciencia", desc: "Jesús carga la Cruz y cae tres veces." },
      { label: "5º Misterio", name: "La Crucifixión", fruit: "Perdón y Entrega", desc: "Jesús muere perdonando a sus verdugos." }
    ]
  },
  gloriosos: {
    title: "Misterios Gloriosos",
    days: "Miércoles y Domingo",
    color: "text-amber-900",
    accent: "bg-amber-700",
    bg: "bg-amber-50",
    items: [
      { label: "1º Misterio", name: "La Resurrección", fruit: "Fe viva", desc: "La victoria definitiva sobre la muerte." },
      { label: "2º Misterio", name: "La Ascensión", fruit: "Deseo del Cielo", desc: "Jesús asciende al Padre prometiendo estar siempre con nosotros." },
      { label: "3º Misterio", name: "Pentecostés", fruit: "Zelo apostólico", desc: "El Espíritu Santo desciende sobre la Iglesia." },
      { label: "4º Misterio", name: "La Asunción", fruit: "Gravedad de alma", desc: "María es elevada al cielo en cuerpo y alma." },
      { label: "5º Misterio", name: "La Coronación", fruit: "Confianza filial", desc: "María es coronada Reina de cielos y tierra." }
    ]
  },
  luminosos: {
    title: "Misterios Luminosos",
    days: "Jueves",
    color: "text-yellow-900",
    accent: "bg-yellow-600",
    bg: "bg-yellow-50",
    items: [
      { label: "1º Misterio", name: "El Bautismo", fruit: "Fidelidad", desc: "Jesús en el Jordán siendo proclamado Hijo amado." },
      { label: "2º Misterio", name: "Bodas de Caná", fruit: "Confianza en María", desc: "El primer milagro a ruego de su Madre." },
      { label: "3º Misterio", name: "Anuncio del Reino", fruit: "Conversión", desc: "Jesús llama al arrepentimiento y la fe." },
      { label: "4º Misterio", name: "Transfiguración", fruit: "Espíritu de oración", desc: "La gloria en el Tabor para fortalecer la fe." },
      { label: "5º Misterio", name: "La Eucaristía", fruit: "Amor al Sacramento", desc: "Institución del Pan de Vida en la Última Cena." }
    ]
  }
};

/**
 * DATOS DE LAS ORACIONES (TESORO DE GRACIA)
 */
const PRAYERS_DATA = [
  {
    id: 'credo',
    title: "Credo de los Apóstoles",
    icon: <Cross />,
    text: "Creo en Dios, Padre Todopoderoso, Creador del cielo y de la tierra. Creo en Jesucristo, su único Hijo, Nuestro Señor..."
  },
  {
    id: 'padrenuestro',
    title: "Padre Nuestro",
    icon: <Flame />,
    text: "Padre nuestro, que estás en el cielo, santificado sea tu Nombre; venga a nosotros tu reino; hágase tu voluntad..."
  },
  {
    id: 'avemaria',
    title: "Ave María",
    icon: <Anchor />,
    text: "Dios te salve, María, llena eres de gracia; el Señor es contigo; bendita Tú eres entre todas las mujeres..."
  }
];

const App = () => {
  const [view, setView] = useState({ section: 'menu', sub: null, detail: null });

  const navigateBack = () => {
    if (view.detail) setView(prev => ({ ...prev, detail: null }));
    else if (view.sub) setView(prev => ({ ...prev, sub: null }));
    else setView({ section: 'menu', sub: null, detail: null });
  };

  /**
   * COMPONENTE: MENÚ PRINCIPAL
   */
  const MainMenu = () => (
    <div className="space-y-8 animate-in fade-in slide-in-from-bottom-6 duration-700">
      <div className="relative h-64 rounded-[3.5rem] overflow-hidden shadow-2xl border-2 border-amber-600/40 bg-gradient-to-br from-amber-900 via-amber-800 to-amber-950 flex flex-col items-center justify-center p-8 text-center">
        <Crown className="text-amber-400 mb-4 opacity-30" size={64} />
        <h2 className="text-4xl font-serif text-amber-400 mb-2 font-bold drop-shadow-md tracking-tight">Santo Rosario</h2>
        <p className="text-white/90 text-sm italic font-serif leading-relaxed px-4">
          "Dadme un ejército que rece el Rosario y venceré al mundo."
        </p>
        <div className="h-0.5 w-16 bg-amber-500 mx-auto mt-4 opacity-50" />
        <p className="text-amber-200/60 text-[10px] uppercase tracking-widest mt-2 font-bold">— San Pío de Pietrelcina</p>
      </div>

      <div className="grid grid-cols-1 gap-6">
        {[
          { id: 'prep', title: 'Corazón y Espíritu', sub: 'Teología de la Preparación', icon: <Sparkles />, desc: "Domina el arte del silencio y la disposición sagrada.", color: "bg-amber-50" },
          { id: 'passo', title: 'Guía del Peregrino', sub: 'La Estructura Mística', icon: <Compass />, desc: "Descubre el simbolismo oculto tras cada cuenta.", color: "bg-blue-50" },
          { id: 'mist', title: 'Los Santos Misterios', sub: 'Vida de Nuestro Señor', icon: <BookOpen />, desc: "Medita los episodios centrales de la Salvación.", color: "bg-red-50" },
          { id: 'oracoes', title: 'Tesoro de Gracia', sub: 'Oraciones y Promesas', icon: <Heart />, desc: "Las palabras sagradas de nuestra fe.", color: "bg-emerald-50" },
        ].map(item => (
          <button 
            key={item.id}
            onClick={() => setView({ ...view, section: item.id })}
            className={`group relative flex items-center gap-6 ${item.color} p-6 rounded-3xl border border-amber-200/50 shadow-md hover:shadow-xl hover:border-amber-400 transition-all text-left overflow-hidden active:scale-[0.98]`}
          >
            <div className="w-16 h-16 rounded-2xl bg-amber-900 text-amber-100 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
              <SafeIcon icon={item.icon} size={32} />
            </div>
            <div className="flex-1 relative z-10">
              <h3 className="font-serif font-bold text-amber-950 text-xl">{item.title}</h3>
              <p className="text-[10px] text-amber-700 font-bold uppercase tracking-wider mb-1">{item.sub}</p>
              <p className="text-xs text-gray-500 italic leading-snug">{item.desc}</p>
            </div>
            <ChevronRight className="text-amber-300 group-hover:text-amber-600 transition-colors" />
          </button>
        ))}
      </div>
    </div>
  );

  /**
   * COMPONENTE: VISTA DE PREPARACIÓN
   */
  const PrepView = () => {
    if (!view.detail) {
      return (
        <div className="space-y-6 animate-in fade-in duration-500">
          <div className="bg-amber-950 p-10 rounded-[3.5rem] text-center shadow-xl border-b-4 border-amber-500">
            <Sparkles className="text-amber-400 mx-auto mb-4" size={48} />
            <h3 className="text-3xl font-serif font-bold text-amber-100">La Disposición Sagrada</h3>
            <p className="text-amber-200/70 text-xs mt-3 italic">"Prepara tu alma como un sagrario para recibir al Rey."</p>
          </div>
          <div className="grid grid-cols-1 gap-4">
            {PREP_DATA.map((item) => (
              <button
                key={item.id}
                onClick={() => setView({ ...view, detail: item })}
                className="bg-white p-6 rounded-[2.5rem] shadow-md border border-amber-100 flex items-center gap-5 hover:border-amber-400 transition-all group"
              >
                <div className="bg-amber-50 w-14 h-14 rounded-2xl flex items-center justify-center group-hover:bg-amber-100 transition-colors">
                  <SafeIcon icon={item.icon} size={28} className="text-amber-700" />
                </div>
                <div className="flex-1 text-left">
                  <h4 className="font-serif font-bold text-amber-950 text-lg leading-tight">{item.title}</h4>
                  <p className="text-[10px] text-amber-700 font-bold uppercase tracking-widest">{item.subtitle}</p>
                </div>
                <ChevronRight className="text-amber-200 group-hover:text-amber-500" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in slide-in-from-right-8 duration-500 space-y-6 pb-20">
        <div className="bg-white p-10 rounded-[4rem] shadow-2xl border-4 border-amber-600/10 relative overflow-hidden">
          <div className="flex flex-col items-center text-center mb-8">
            <div className="bg-amber-50 p-5 rounded-3xl mb-4 border border-amber-100">
              <SafeIcon icon={view.detail.icon} size={40} className="text-amber-700" />
            </div>
            <h3 className="text-3xl font-serif font-bold text-amber-950 leading-tight">{view.detail.title}</h3>
            <p className="text-xs text-amber-600 font-bold uppercase tracking-widest mt-2">{view.detail.subtitle}</p>
          </div>
          <p className="text-gray-700 leading-relaxed italic text-lg font-serif border-l-4 border-amber-300 pl-8">
            {view.detail.desc}
          </p>
        </div>
        <button onClick={() => setView({ ...view, detail: null })} className="w-full bg-amber-900 text-white py-6 rounded-[2.5rem] font-bold shadow-xl">
          Volver a Preparación
        </button>
      </div>
    );
  };

  /**
   * COMPONENTE: VISTA GUÍA DEL PEREGRINO
   */
  const StepByStep = () => {
    if (!view.detail) {
      return (
        <div className="space-y-6 animate-in fade-in duration-500">
          <div className="bg-blue-950 p-10 rounded-[3.5rem] text-center shadow-xl border-b-4 border-blue-400">
            <Map className="text-blue-300 mx-auto mb-4" size={48} />
            <h3 className="text-3xl font-serif font-bold text-blue-100">Ruta de Oración</h3>
            <p className="text-blue-200/70 text-xs mt-3 italic">"Cada cuenta es un paso hacia el encuentro con Cristo."</p>
          </div>
          <div className="grid grid-cols-1 gap-4">
            {PILGRIM_DATA.map((item) => (
              <button
                key={item.id}
                onClick={() => setView({ ...view, detail: item })}
                className="bg-white p-6 rounded-[2.5rem] shadow-md border border-blue-100 flex items-center gap-5 hover:border-blue-400 transition-all group"
              >
                <div className="bg-blue-50 w-14 h-14 rounded-2xl flex items-center justify-center group-hover:bg-blue-100 transition-colors">
                  <SafeIcon icon={item.icon} size={28} className="text-blue-700" />
                </div>
                <div className="flex-1 text-left">
                  <h4 className="font-serif font-bold text-amber-950 text-lg leading-tight">{item.title}</h4>
                  <p className="text-[10px] text-blue-700 font-bold uppercase tracking-widest">{item.subtitle}</p>
                </div>
                <ChevronRight className="text-blue-200 group-hover:text-blue-500" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in slide-in-from-right-8 duration-500 space-y-6 pb-20">
        <div className="bg-white p-10 rounded-[4rem] shadow-2xl border-4 border-blue-600/10 relative overflow-hidden">
          <div className="flex flex-col items-center text-center mb-8">
            <div className="bg-blue-50 p-5 rounded-3xl mb-4 border border-blue-100">
              <SafeIcon icon={view.detail.icon} size={40} className="text-blue-700" />
            </div>
            <h3 className="text-3xl font-serif font-bold text-amber-950 leading-tight">{view.detail.title}</h3>
            <p className="text-xs text-blue-600 font-bold uppercase tracking-widest mt-2">{view.detail.subtitle}</p>
          </div>
          <p className="text-gray-700 leading-relaxed italic text-lg font-serif border-l-4 border-blue-300 pl-8">
            {view.detail.desc}
          </p>
        </div>
        <button onClick={() => setView({ ...view, detail: null })} className="w-full bg-blue-900 text-white py-6 rounded-[2.5rem] font-bold shadow-xl">
          Volver a la Guía
        </button>
      </div>
    );
  };

  /**
   * COMPONENTE: VISTA DE MISTERIOS
   */
  const MysteriesView = () => {
    if (!view.sub) {
      return (
        <div className="grid grid-cols-1 gap-6 animate-in zoom-in-95 duration-500">
          {Object.entries(MYSTERIES_DATA).map(([key, data]) => (
            <button
              key={key}
              onClick={() => setView({ ...view, sub: key })}
              className={`p-10 rounded-[3rem] border-2 ${data.bg} border-amber-200/50 text-left hover:shadow-lg transition-all relative overflow-hidden shadow-md`}
            >
              <span className={`text-[10px] font-extrabold uppercase tracking-[0.3em] ${data.color}`}>{data.days}</span>
              <h3 className={`text-4xl font-serif font-bold ${data.color} mt-2`}>{data.title}</h3>
              <ChevronRight className={`absolute right-6 top-1/2 -translate-y-1/2 ${data.color} opacity-40`} />
            </button>
          ))}
        </div>
      );
    }

    const category = MYSTERIES_DATA[view.sub];
    if (!view.detail) {
      return (
        <div className="space-y-4 animate-in slide-in-from-right-8 duration-500">
          <div className={`p-10 rounded-[3.5rem] ${category.bg} border-2 border-amber-200/50 shadow-xl text-center`}>
            <h3 className={`text-3xl font-serif font-bold ${category.color}`}>{category.title}</h3>
            <p className="text-[10px] text-amber-700 font-bold uppercase tracking-widest mt-2">Selecciona un misterio</p>
          </div>
          <div className="space-y-3">
            {category.items.map((item, idx) => (
              <button
                key={idx}
                onClick={() => setView({ ...view, detail: item })}
                className="w-full bg-white p-6 rounded-[2.5rem] border border-amber-100 flex justify-between items-center hover:bg-amber-50 shadow-sm"
              >
                <div className="text-left">
                  <span className="text-[10px] font-bold text-amber-600 uppercase block tracking-widest">{item.label}</span>
                  <h4 className="font-serif font-bold text-amber-950 text-xl">{item.name}</h4>
                </div>
                <ChevronRight size={20} className="text-amber-300" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in fade-in duration-500 space-y-8">
        <div className={`p-10 rounded-[4rem] ${category.bg} border-4 border-amber-400/20 shadow-2xl`}>
          <span className={`text-xs font-extrabold uppercase tracking-[0.4em] ${category.color} block mb-6 text-center`}>{view.detail.label}</span>
          <h3 className={`text-4xl font-serif font-bold ${category.color} mb-10 text-center leading-tight`}>{view.detail.name}</h3>
          <div className="bg-white/90 p-8 rounded-[3rem] shadow-inner text-center font-serif italic text-gray-800 leading-relaxed">
            "{view.detail.desc}"
          </div>
          <div className="mt-8 flex items-center gap-4 bg-white/50 p-6 rounded-[2.5rem]">
            <div className="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white"><Star size={24}/></div>
            <div>
              <p className="text-[10px] uppercase font-bold text-amber-900/50">Fruto del Espíritu</p>
              <p className="text-xl font-serif font-bold text-amber-900">{view.detail.fruit}</p>
            </div>
          </div>
        </div>
      </div>
    );
  };

  /**
   * COMPONENTE: VISTA TESORO DE GRACIA (ORACIONES)
   */
  const PrayersView = () => {
    if (!view.detail) {
      return (
        <div className="space-y-6 animate-in fade-in duration-500">
          <div className="relative h-48 rounded-[3.5rem] bg-gradient-to-tr from-emerald-900 to-emerald-700 flex flex-col items-center justify-center p-10 text-center shadow-2xl">
            <Heart className="text-emerald-300 mb-2 opacity-40" size={48} />
            <h3 className="text-3xl font-serif font-bold text-white uppercase tracking-tighter">Tesoro de Gracia</h3>
            <p className="text-white/70 text-xs mt-2 italic tracking-wide">El jardín de las palabras sagradas.</p>
          </div>
          <div className="grid grid-cols-1 gap-4">
            {PRAYERS_DATA.map((prayer) => (
              <button
                key={prayer.id}
                onClick={() => setView({ ...view, detail: prayer })}
                className="bg-white p-6 rounded-[2.5rem] shadow-md border border-amber-100 flex items-center gap-5 hover:border-emerald-400 hover:shadow-xl transition-all group"
              >
                <div className="bg-emerald-50 w-14 h-14 rounded-2xl flex items-center justify-center group-hover:bg-emerald-100 transition-colors">
                  <SafeIcon icon={prayer.icon} size={28} className="text-emerald-700" />
                </div>
                <div className="flex-1 text-left">
                  <h4 className="font-serif font-bold text-amber-950 text-xl">{prayer.title}</h4>
                  <p className="text-[10px] text-emerald-700 font-bold uppercase tracking-widest">Oración completa</p>
                </div>
                <ChevronRight className="text-amber-200 group-hover:text-emerald-500" />
              </button>
            ))}
          </div>
        </div>
      );
    }

    return (
      <div className="animate-in slide-in-from-right-8 duration-500 space-y-6 pb-20">
        <div className="bg-white p-10 rounded-[4rem] shadow-2xl border-4 border-emerald-600/10 relative overflow-hidden">
          <div className="flex flex-col items-center text-center mb-8">
            <div className="bg-emerald-50 p-5 rounded-3xl mb-4 border border-emerald-100">
              <SafeIcon icon={view.detail.icon} size={40} className="text-emerald-700" />
            </div>
            <h3 className="text-3xl font-serif font-bold text-amber-950 leading-tight">{view.detail.title}</h3>
          </div>
          <p className="text-gray-800 leading-relaxed italic text-lg font-serif border-l-4 border-emerald-300 pl-8 whitespace-pre-line">
            {view.detail.text}
          </p>
        </div>
        <button onClick={() => setView({ ...view, detail: null })} className="w-full bg-emerald-900 text-white py-6 rounded-[2.5rem] font-bold shadow-xl">
          Volver al Tesoro
        </button>
      </div>
    );
  };

  return (
    <div className="min-h-screen font-sans pb-40 bg-[#fcfbf7]">
      <header className="sticky top-0 z-50 bg-white/95 backdrop-blur-md px-4 py-5 md:px-6 md:py-6 flex items-center justify-between border-b-2 border-amber-200/30 shadow-md">
        <div className="flex items-center gap-3 md:gap-5">
          {view.section !== 'menu' && (
            <button onClick={navigateBack} className="p-2 md:p-3 rounded-2xl bg-amber-50 text-amber-950 hover:bg-amber-100 transition-colors shadow-sm">
              <ArrowLeft size={24} strokeWidth={2.5} />
            </button>
          )}
          <div>
            <h1 className="text-xl md:text-2xl font-serif font-bold text-amber-950 tracking-tight leading-none">
              {view.section === 'menu' ? 'Guía Sacra' : 
               view.section === 'prep' ? 'Corazón' :
               view.section === 'passo' ? 'Camino' :
               view.section === 'mist' ? 'Misterios' : 'Tesoro'}
            </h1>
            <p className="text-[8px] md:text-[9px] text-amber-600 font-extrabold uppercase tracking-[0.4em] mt-1 opacity-70">
              Formación Espiritual
            </p>
          </div>
        </div>
        <div className="w-12 h-12 md:w-14 md:h-14 rounded-2xl bg-amber-100 border-2 border-amber-200 flex items-center justify-center text-amber-800">
          <Cross size={28} />
        </div>
      </header>

      <main className="max-w-2xl mx-auto p-4 md:p-10">
        {view.section === 'menu' && <MainMenu />}
        {view.section === 'prep' && <PrepView />}
        {view.section === 'passo' && <StepByStep />}
        {view.section === 'mist' && <MysteriesView />}
        {view.section === 'oracoes' && <PrayersView />}
      </main>

      <nav className="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t-2 border-amber-100 px-6 md:px-12 py-5 md:py-6 flex justify-around items-center z-50 shadow-[0_-10px_30px_rgba(0,0,0,0.08)]">
        <button onClick={() => setView({section: 'menu', sub: null, detail: null})} className={`flex flex-col items-center gap-1.5 md:gap-2 transition-all ${view.section === 'menu' ? 'text-amber-800 scale-110' : 'text-gray-300 hover:text-amber-400'}`}>
          <Star size={24} fill={view.section === 'menu' ? 'currentColor' : 'none'} />
          <span className="text-[9px] md:text-[10px] font-extrabold uppercase tracking-widest">Início</span>
        </button>
        
        <a 
          href="https://santorosarioes.netlify.app/" 
          target="_blank" 
          rel="noopener noreferrer"
          className="relative -mt-16 group outline-none"
        >
          <div className="w-20 h-20 bg-amber-900 rounded-[2.5rem] flex items-center justify-center border-[6px] border-[#fcfbf7] shadow-2xl active:scale-90 transition-transform group-hover:bg-amber-800">
             <Cross size={32} className="text-white" />
          </div>
          <span className="text-[9px] md:text-[10px] font-extrabold text-amber-900 absolute -bottom-8 left-1/2 -translate-x-1/2 uppercase tracking-[0.2em] whitespace-nowrap">Rezar</span>
        </a>

        <button onClick={() => setView({section: 'mist', sub: null, detail: null})} className={`flex flex-col items-center gap-1.5 md:gap-2 transition-all ${view.section === 'mist' ? 'text-amber-800 scale-110' : 'text-gray-300 hover:text-amber-400'}`}>
          <BookOpen size={24} fill={view.section === 'mist' ? 'currentColor' : 'none'} />
          <span className="text-[9px] md:text-[10px] font-extrabold uppercase tracking-widest">Meditar</span>
        </button>
      </nav>
    </div>
  );
};

export default App;
        
